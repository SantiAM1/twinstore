{% extends 'base.html' %}
{% load static %}
{% block head %}
<title>{{producto.nombre}} - Twinstore</title>
<link rel="stylesheet" href="{% static 'css/substyles/feedback-users.css' %}">
<link rel="stylesheet" href="{% static 'css/forms.css' %}">
{% endblock head %}
{% block contenidomain %}
<main class="padding-1rem">
    <form method="POST" enctype="multipart/form-data" class="users-perfil flex font-roboto width-100">
        {% csrf_token %}
        <div class="flex flex-column gap-1rem width-100">
            <h1>Editar producto: {{ producto.nombre }}</h1>
            <div class="container-form">
                {{form.nombre}}
                <label for="{{ form.nombre.id_for_label }}" class="form-label">{{form.nombre.label}}</label>
            </div>
            <div class="container-form">
                {{form.marca}}
            </div>
            <div class="container-form">
                {{form.sub_categoria}}
            </div>
            {% if producto.precio_anterior %}
            <div class="container-form">
                <input type="text" name="precio_anterior" value="{{producto.precio_anterior}}" class="form-input bloqueable font-roboto position-absolute width-100 height-100 border-none" readonly id="id_precio_anterior" placeholder=" ">
                <label for="{{ form.precio_anterior.id_for_label }}" class="form-label">Precio anterior</label>
            </div>
            {% endif %}
            <div class="container-form">
                {{form.precio}}
                <label for="{{ form.precio.id_for_label }}" class="form-label">{{form.precio.label}}</label>
            </div>
            <div class="container-form">
                {{form.descuento}}
                <label for="{{ form.descuento.id_for_label }}" class="form-label">{{form.descuento.label}}</label>
            </div>
            <div class="container-form">
                {{form.portada}}
                <label for="{{ form.portada.id_for_label }}" class="form-label">{{form.portada.label}}</label>
            </div>

            <h3>Im√°genes</h3>
            {{ formset.management_form }}
            {% for imagen_form in formset %}
                <div class="mb-3">
                    {{ imagen_form.imagen.label_tag }}
                    {{ imagen_form.imagen }}
                    {% if imagen_form.instance.imagen %}
                        <img src="{{ imagen_form.instance.imagen.url }}" width="100">
                    {% endif %}
                    {{ imagen_form.DELETE }} Eliminar
                </div>
            {% endfor %}
            <button type="submit" class="tw-hover-button">Guardar cambios</button>
        </div>
    </form>
</main>
{% endblock contenidomain %}